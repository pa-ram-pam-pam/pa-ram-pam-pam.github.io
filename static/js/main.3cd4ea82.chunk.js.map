{"version":3,"sources":["app/actionTypes/actionTypes.js","app/unsplash.js","app/constants/constants.js","app/actionCreators/actionCreators.js","app/selectors/selectors.js","app/components/PhotoStatistics.js","app/components/SmallPhoto.js","app/containers/BlockOfSmallPhotos.js","app/containers/BlockOfBigPhoto.js","app/containers/Auth.js","app/containers/PreAuthorization.js","app/containers/ErrMessage.js","app/containers/App.js","app/reducers/reducers.js","index.js"],"names":["actionTypes","LOAD_PHOTOS","SELECT_PHOTO","SET_ERROR","LIKE_PHOTO","UNLIKE_PHOTO","unsplash","Unsplash","accessKey","secret","callbackUrl","loadPhotos","dispatch","getState","counter","search","photos","then","toJson","json","createActionLoadPhotos","catch","err","createActionSetError","type","payload","results","getPhotosReselected","createSelector","state","getPageYReselected","pageY","PhotoStatiscs","photo","user","name","authorLink","links","html","created_at","likes","href","SmallPhoto","selectPhoto","id","description","url","urls","small","key","to","onClick","window","pageYOffset","src","alt","PhotoStatistics","connect","handleScroll","ev","innerHeight","document","documentElement","scrollTop","offsetHeight","preventDefault","useEffect","scrollTo","addEventListener","removeEventListener","length","onScroll","map","onClickCapture","target","blur","likePhoto","unlikePhoto","useParams","find","item","useState","liked_by_user","liked","setLiked","Button","regular","code","location","split","auth","userAuthentication","res","setBearerToken","access_token","PreAutorization","authenticationUrl","getAuthenticationUrl","assign","errMessage","console","log","path","process","component","Auth","BlockOfSmallPhotos","BlockOfBigPhoto","from","reducers","action","unatedArr","concat","newArr","index","findIndex","store","createStore","applyMiddleware","thunk","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.3cd4ea82.chunk.js","sourcesContent":["const actionTypes = {\r\n  LOAD_PHOTOS: \"LOAD_PHOTOS\",\r\n  SELECT_PHOTO: \"SELECT_PHOTO\",\r\n  SET_ERROR: \"SET_ERROR\",\r\n  LIKE_PHOTO: \"LIKE_PHOTO\",\r\n  UNLIKE_PHOTO: \"UNLIKE_PHOTO\",\r\n};\r\n\r\nexport default actionTypes;\r\n","import { ACCESS_KEY, SECRET_KEY, CALLBACK_URL } from \"./constants/constants\"\r\nimport Unsplash from \"unsplash-js\"\r\n\r\n\r\nexport const unsplash = new Unsplash({\r\n  accessKey: ACCESS_KEY,\r\n  secret: SECRET_KEY,\r\n  callbackUrl: CALLBACK_URL,\r\n\r\n});\r\n","export const NUMBER_OF_UPLOADED_PHOTOS = 10\r\n\r\nexport const ACCESS_KEY = \"KJOvYEYwLUqBqwO2elNDQlVbvpovCUF0gxnLu9Uql6M\";\r\n\r\nexport const SECRET_KEY = \"oY014JiJh1zZyhhd9ngAWmLMB0RDfOBbVEH2ghladaA\";\r\n\r\nexport const CALLBACK_URL = \"http://localhost:3000/auth\";","import actionTypes from \"../actionTypes/actionTypes\";\r\nimport { toJson } from \"unsplash-js\";\r\nimport { NUMBER_OF_UPLOADED_PHOTOS } from \"../constants/constants\";\r\nimport { unsplash } from \"../unsplash\";\r\n\r\nconst { LOAD_PHOTOS, SET_ERROR, SELECT_PHOTO, LIKE_PHOTO, UNLIKE_PHOTO } = actionTypes;\r\n\r\nexport const loadPhotos = () => {\r\n  return function (dispatch, getState) {\r\n    const counter = getState().counter;\r\n    unsplash.search\r\n      .photos(\"cats\", counter + 1, NUMBER_OF_UPLOADED_PHOTOS)\r\n      .then(toJson)\r\n      .then((json) => {\r\n        dispatch(createActionLoadPhotos(json));\r\n      })\r\n      .catch(function (err) {\r\n        dispatch(createActionSetError());\r\n      });\r\n  };\r\n};\r\n\r\nexport const selectPhoto = (pageY) => {\r\n  return {\r\n    type: SELECT_PHOTO,\r\n    pageY,\r\n  };\r\n};\r\n\r\nexport const likePhoto = (id) => {\r\n  return {\r\n    type: LIKE_PHOTO,\r\n    payload: id,\r\n  };\r\n};\r\n\r\nexport const unlikePhoto = (id) => {\r\n  return {\r\n    type: UNLIKE_PHOTO,\r\n    payload: id,\r\n  };\r\n};\r\n\r\nconst createActionLoadPhotos = (json) => {\r\n  return {\r\n    type: LOAD_PHOTOS,\r\n    payload: json.results,\r\n  };\r\n};\r\n\r\nconst createActionSetError = () => {\r\n  return {\r\n    type: SET_ERROR,\r\n    payload: \"Проблема соединения с сервером, перезагрузите страницу\",\r\n  };\r\n};\r\n","import { createSelector } from \"reselect\";\r\n\r\nconst getPhotos = (state) => state.photos;\r\n\r\nconst getPageY = (state) => state.pageY;\r\n\r\nexport const getPhotosReselected = createSelector (getPhotos, state => state)\r\n\r\nexport const getPageYReselected = createSelector (getPageY, state => state)\r\n\r\n","import React from \"react\";\r\n\r\nconst PhotoStatiscs = ({ photo }) => {\r\n  const { user: { name, links: { html: { authorLink } } }, created_at, likes } = photo;\r\n  // const { name } = user;\r\n  // const authorLink = user.links.html;\r\n  // const { created_at } = photo;\r\n  // const { likes } = photo;\r\n\r\n  return (\r\n    <div>\r\n      <div>\r\n        Автор:\r\n        <a href={authorLink}>{name}</a>\r\n      </div>\r\n      <div>Дата: {created_at}</div>\r\n      <div>Лайков: {likes}</div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PhotoStatiscs;\r\n","import React from \"react\"\r\nimport { Link } from \"react-router-dom\";\r\nimport PhotoStatistics from \"../components/PhotoStatistics\";\r\n\r\nconst SmallPhoto = ({ photo, selectPhoto }) => {\r\n  const {\r\n    id,\r\n    description,\r\n    urls: { small: url },\r\n  } = photo;\r\n\r\n  return (\r\n    <div key={id}>\r\n      <Link\r\n        to={\"/view/\" + id}\r\n        onClick={() => {\r\n          selectPhoto(window.pageYOffset);\r\n        }}\r\n      >\r\n        <img src={url} alt={description}></img>\r\n      </Link>\r\n      <PhotoStatistics photo={photo} />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default SmallPhoto","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport { loadPhotos, selectPhoto } from \"../actionCreators/actionCreators\";\r\nimport { getPhotosReselected, getPageYReselected } from \"../selectors/selectors\";\r\nimport SmallPhoto from \"../components/SmallPhoto\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst BlockOfSmallPhotos = ({ photos, loadPhotos, selectPhoto, pageY }) => {\r\n\r\n  const handleScroll = (ev) => {\r\n    if (\r\n      window.innerHeight + document.documentElement.scrollTop !==\r\n      document.documentElement.offsetHeight\r\n    ) {\r\n      return;\r\n    }\r\n    ev.preventDefault();\r\n    loadPhotos();\r\n  };\r\n\r\n  useEffect(() => {\r\n    window.scrollTo(0, pageY);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => window.removeEventListener(\"scroll\", handleScroll);\r\n  }, []);\r\n\r\n  const onClickHandler = (ev) => {\r\n    ev.preventDefault();\r\n    ev.target.blur();\r\n    loadPhotos();\r\n  };\r\n\r\n  if (photos.length === 0) { return (<Redirect to={\"/preauth\"} />) }\r\n  else {\r\n    return (\r\n      <div onScroll={loadPhotos}>\r\n        {photos.map((photo) => {\r\n          return (\r\n            <SmallPhoto key={photo.id} photo={photo} selectPhoto={selectPhoto} />\r\n          );\r\n        })}\r\n        <br />\r\n        <button onClickCapture={onClickHandler}>Загрузить еще фоточек</button>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    photos: getPhotosReselected(state),\r\n    pageY: getPageYReselected(state),\r\n  };\r\n};\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    loadPhotos: () => dispatch(loadPhotos()),\r\n    selectPhoto: (pageY) => dispatch(selectPhoto(pageY)),\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BlockOfSmallPhotos);\r\n","import React, { useState } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport PhotoStatiscs from \"../components/PhotoStatistics\";\r\nimport { useParams, Redirect, Link } from \"react-router-dom\";\r\nimport { unsplash } from \"../unsplash\"\r\nimport { toJson } from \"unsplash-js\"\r\nimport { getPhotosReselected } from \"../selectors/selectors\";\r\nimport { likePhoto, unlikePhoto } from \"../actionCreators/actionCreators\";\r\n\r\nconst BlockOfBigPhoto = ({ photos, likePhoto, unlikePhoto }) => {\r\n\r\n\r\n  const { id } = useParams()\r\n  const photo = photos.find((item) => item.id === id)\r\n  const [liked, setLiked] = useState(photo?.liked_by_user)\r\n  if (photos.length === 0) { return (<Redirect to={\"/preauth\"} />) }  //это на случай если юзер зашел по ссылке напрямую без загрузки фотографий\r\n\r\n  const like = () => {\r\n    unsplash.photos.likePhoto(photo.id)\r\n      .then(toJson)\r\n      .then(() => {\r\n        likePhoto(id)\r\n        setLiked(!liked)\r\n      });\r\n  }\r\n\r\n  const unLike = () => {\r\n    unsplash.photos.unlikePhoto(photo.id)\r\n      .then(toJson)\r\n      .then(() => {\r\n        unlikePhoto(id)\r\n        setLiked(!liked)\r\n      });\r\n  }\r\n  let Button\r\n  (liked === false) ? Button = (<button onClick={like}>Поставить лайк</button>) : Button = (<button onClick={unLike}>Убрать лайк</button>)\r\n\r\n  const { description, urls: { regular: url } } = photo\r\n\r\n  return (\r\n    <div>\r\n      <h2>Большая фоточка</h2>\r\n      <PhotoStatiscs photo={photo} />\r\n      <div>\r\n      </div>\r\n      <div>\r\n        <img src={url} alt={description}></img>\r\n        <br />\r\n        {Button}\r\n      </div>\r\n      <Link to=\"/feed\"> Назад </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    photos: getPhotosReselected(state)\r\n  };\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    likePhoto: (id) => dispatch(likePhoto(id)),\r\n    unlikePhoto: (id) => dispatch(unlikePhoto(id)),\r\n\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(BlockOfBigPhoto);\r\n\r\n","import React, { useState, useEffect } from \"react\"\r\nimport { unsplash } from \"../unsplash\"\r\nimport { connect } from \"react-redux\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport { loadPhotos } from \"../actionCreators/actionCreators\";\r\nimport { getPhotosReselected } from \"../selectors/selectors\"\r\n\r\nconst Auth = ({ loadPhotos, photos }) => {\r\n\r\n\r\n  useEffect(() => {\r\n    const code = document.location.search.split(\"code=\")[1];\r\n\r\n    {\r\n      if (code) unsplash.auth.userAuthentication(code).then(res => res.json()).then(json => {\r\n        unsplash.auth.setBearerToken(json.access_token)\r\n        loadPhotos()\r\n      }\r\n      )\r\n    }\r\n  }, [])\r\n\r\n\r\n  if (photos.length !== 0) {\r\n    return (\r\n      <Redirect to={\"/feed\"} />\r\n    )\r\n  }\r\n  else { return null }\r\n}\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n  return {\r\n    photos: getPhotosReselected(state),\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n    loadPhotos: () => dispatch(loadPhotos()),\r\n  };\r\n};\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\r\n","import { unsplash } from \"../unsplash\"\r\n\r\n\r\nconst PreAutorization = () => {\r\n  const authenticationUrl = unsplash.auth.getAuthenticationUrl([\"public\", \"write_likes\"]);\r\n  document.location.assign(authenticationUrl);\r\n  return null\r\n}\r\nexport default PreAutorization;\r\n","import React, { useEffect } from \"react\";\r\nimport { connect } from \"react-redux\";\r\n\r\nconst ErrMessage = ({ errMessage }) => {\r\n  useEffect(() => {\r\n    console.log(\"рендер ошибок\");\r\n  })\r\n  return <>{errMessage}</>;\r\n};\r\n\r\nconst mapStateToProps = ({ errMessage }) => {\r\n  return {\r\n    errMessage,\r\n  };\r\n};\r\n\r\nexport default connect(mapStateToProps, null)(ErrMessage);\r\n","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { BrowserRouter as Router, Route, Switch, Redirect, HashRouter, BrowserRouter } from \"react-router-dom\";\nimport BlockOfSmallPhotos from \"./BlockOfSmallPhotos\";\nimport BlockOfBigPhoto from \"./BlockOfBigPhoto\";\nimport Auth from \"./Auth\"\nimport PreAutorization from \"./PreAuthorization\"\nimport ErrMessage from \"./ErrMessage\";\n\nconst App = ({ errMessage }) => {\n  return (\n    <>\n      {errMessage ? (<ErrMessage />) : null}\n      <Router>\n        <Switch>\n          <Route path={process.env.PUBLIC_URL + \"/preauth\"} component={PreAutorization} />\n          <Route path={process.env.PUBLIC_URL + \"/auth\"} component={Auth} />\n          <Route path={process.env.PUBLIC_URL + \"/feed\"} component={BlockOfSmallPhotos} />\n          <Route path={process.env.PUBLIC_URL + \"/view/:id\"} component={BlockOfBigPhoto} />\n          <Redirect from=\"/\" to=\"/preauth\" />\n        </Switch>\n      </Router>\n    </>\n  );\n};\nconst mapStateToProps = ({ errMessage }) => {\n  return {\n    errMessage,\n  };\n};\n\nexport default connect(mapStateToProps, null)(App);\n\n{/* <HashRouter basename=\"/\" hashType=\"noslash\"> */ }","import actionTypes from \"../actionTypes/actionTypes\";\r\n\r\nconst reducers = (state = {}, action) => {\r\n  switch (action.type) {\r\n    case actionTypes.LOAD_PHOTOS:\r\n      const unatedArr = state.photos.concat(action.payload);\r\n      const counter = state.counter + 1;\r\n      return {\r\n        ...state,\r\n        photos: unatedArr,\r\n        counter,\r\n        errMessage: null,\r\n      };\r\n\r\n    case actionTypes.SELECT_PHOTO:\r\n      return {\r\n        ...state,\r\n        pageY: action.pageY,\r\n      };\r\n\r\n    case actionTypes.SET_ERROR:\r\n      return {\r\n        ...state,\r\n        errMessage: action.payload,\r\n      };\r\n\r\n    case actionTypes.LIKE_PHOTO:\r\n      let newArr = state.photos.map(item => item)\r\n      let index = newArr.findIndex((item) => item.id === action.payload)\r\n      newArr[index].liked_by_user = true;\r\n      newArr[index].likes = newArr[index].likes + 1;\r\n    return {\r\n      ...state,\r\n      photos: newArr,\r\n    };  \r\n\r\n    case actionTypes.UNLIKE_PHOTO:\r\n      newArr = state.photos.map(item => item)\r\n      index = newArr.findIndex((item) => item.id === action.payload)\r\n      newArr[index].liked_by_user = false;\r\n      newArr[index].likes = newArr[index].likes - 1;\r\n    return {\r\n      ...state,\r\n      photos: newArr,\r\n    };\r\n\r\n    default:\r\n      return state;\r\n  }\r\n};\r\n\r\nexport default reducers;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app/containers/App';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport reducers from './app/reducers/reducers';\nimport thunk from 'redux-thunk';\n\nconst initialState = {\n  photos: [],\n  counter: 0,\n  errMessage: null,\n  pageY: 0,\n};\n\nconst store = createStore(reducers, initialState, applyMiddleware(thunk));\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}